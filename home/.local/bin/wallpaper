#!/usr/bin/env bash

SELECTED_WALLPAPER=$(sxiv -tfo .wallpaper)

if [[ -z "${SELECTED_WALLPAPER// /}" ]]; then
	exit
else
	xwallpaper --zoom /home/$USER/"$SELECTED_WALLPAPER"
	echo "/home/$USER/$SELECTED_WALLPAPER" >/home/$USER/xwallpaper
	echo "\$material-you: $(convert /home/$USER/$SELECTED_WALLPAPER -resize 1x1 -colors 1 -format "%c" histogram:info:- | sort -rn | uniq -c | awk 'NR==1{gsub(/.*#/, ""); printf("#%s;\n", $1)}' | cut -c 1-7); \$text-color: #CDD6F4;" >/home/ramin/.config/eww/actions/colors.scss
fi
