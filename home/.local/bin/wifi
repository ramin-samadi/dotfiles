#!/usr/bin/env bash

# NOTE: networkmanager sed dmenu

SELECTED_BSSID=$(nmcli device wifi list | sed -n '1!p' | cut -b 9- | cut -d' ' -f3 | sort | uniq | sed '/--/d' | dmenu -p "" | cut -d' ' -f1)

if [[ -z "${SELECTED_BSSID// /}" ]]; then
	exit
else
	PASSWORD_INPUT=$(echo -n "" | dmenu -p "")
fi

if [[ -z "${PASSWORD_INPUT// /}" ]]; then
	exit
else
	nmcli device wifi connect "$SELECTED_BSSID" password "$PASSWORD_INPUT"
fi
